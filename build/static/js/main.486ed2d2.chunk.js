(this["webpackJsonpfront-end-react"]=this["webpackJsonpfront-end-react"]||[]).push([[0],{177:function(e,t,n){},178:function(e,t,n){},186:function(e,t,n){},187:function(e,t,n){},214:function(e,t,n){},310:function(e,t,n){},319:function(e,t,n){"use strict";n.r(t);var r=n(7),a=n(0),c=n(30),o=n.n(c),i=(n(177),n(178),n(59));function s(){var e=Object(i.b)(),t=e.loginWithRedirect;return e.isAuthenticated?Object(r.jsx)("p",{children:"Logged in"}):Object(r.jsx)("button",{onClick:function(){return t()},className:"log-button",children:"Log In"})}var l=n(67),d=n.n(l),b=n(87),u=n(73);n(186);function j(){var e=Object(i.b)(),t=e.logout;return e.isAuthenticated&&Object(r.jsx)("button",{id:"log-out-button",className:"log-button",onClick:function(){return t()},children:"Log Out"})}n(187);var h=n.p+"static/media/logo.648d723f.png",p=n(51),O=n(324),x=O.a.Search;function f(e){var t=e.nickname,n=e.bookCount,c=Object(a.useState)(""),o=Object(u.a)(c,2),i=o[0],s=o[1];function l(){return(l=Object(b.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://patricks-bookshelf.herokuapp.com/search/".concat(t));case 2:return n=e.sent,e.next=5,n.json();case 5:r=e.sent,s(r.payload);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return console.log(i),Object(r.jsxs)("header",{children:[Object(r.jsxs)("div",{className:"header-wrapper",id:"header-items-left",children:[Object(r.jsx)(p.b,{to:"/",children:Object(r.jsx)("img",{src:h,alt:"logo"})}),Object(r.jsxs)("span",{id:"welcome",className:"header-text",children:["Welcome ",t]}),Object(r.jsxs)("span",{id:"book-count",children:["Total Books: ",n," "]})]}),Object(r.jsxs)("div",{className:"header-wrapper",id:"header-items-right",children:[Object(r.jsx)(p.b,{to:"/add-book",children:Object(r.jsx)("button",{id:"add-book-button",children:"Add New Book"})}),Object(r.jsx)("div",{id:"search-box",children:Object(r.jsx)(x,{placeholder:"input search text",onSearch:function(e){!function(e){l.apply(this,arguments)}(e)},id:"search"})}),Object(r.jsx)(j,{})]})]})}var m=n(322);n(213),n(214);function k(e){var t=e.visability,n=e.data,a=(e.nickname,[{title:"Title",dataIndex:"title",key:"title",render:function(e,t){return Object(r.jsx)(p.b,{to:"/book/".concat(t.id),children:e})}},{title:"Author",dataIndex:"author",key:"author"},{title:"Genre",dataIndex:"genre",key:"genre"},{title:"Read?",dataIndex:"read",key:"read",render:function(e,t){return t.read?"Read":"Not read"}},{title:"Series",dataIndex:"series",key:"series",render:function(e,t){return t.series?t.series:""}},{title:"Leant?",dataIndex:"leant",key:"leant"}]);return t?Object(r.jsxs)("div",{id:"library-box",children:[Object(r.jsx)("h1",{children:"Patrick's library"}),Object(r.jsx)(m.a,{columns:a,pagination:{position:["topRight","bottomRight"]},dataSource:n,id:"full-library-table"})]}):Object(r.jsx)("p",{children:"..."})}var g=n(32),v=n(75),y=n(323),w=n(325),I=n(92),N=n(46);n(310);function S(){var e=y.a.useForm(),t=Object(u.a)(e,1)[0],n={wrapperCol:{offset:8,span:16}};return Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:"Add New Book"}),Object(r.jsx)("div",{id:"#add-book-form",children:Object(r.jsxs)(y.a,Object(v.a)(Object(v.a)({form:t},{labelCol:{span:8},wrapperCol:{span:16}}),{},{name:"basic",initialValues:{remember:!0},onFinish:function(e){fetch("https://patricks-bookshelf.herokuapp.com/add",{method:"post",body:JSON.stringify({title:e.Title,author:e.Author,genre:e.Genre,read:e.read,series:e.Series,leant:e.Leant}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(n){var r;r=e.Title,w.b.success("".concat(r," has been added to the library")),t.resetFields()})).catch((function(e){w.b.error("This service is currently unavailable. Please try again later."),console.log(e,"Beepboop")})),console.log({book:e})},onFinishFailed:function(e){w.b.warning("Something went wrong. Please try again."),console.log({errorInfo:e})},children:[Object(r.jsx)(y.a.Item,{label:"Title",name:"Title",rules:[{required:!0,message:"Please input the book title"}],children:Object(r.jsx)(O.a,{})}),Object(r.jsx)(y.a.Item,{label:"Author",name:"Author",rules:[{required:!0,message:"Please input author name"}],children:Object(r.jsx)(O.a,{})}),Object(r.jsx)(y.a.Item,{label:"Genre",name:"Genre",rules:[{required:!0,message:"Please input genre"}],children:Object(r.jsx)(O.a,{})}),Object(r.jsx)(y.a.Item,Object(v.a)(Object(v.a)({},n),{},{name:"read",valuePropName:"checked",children:Object(r.jsx)(I.a,{children:"I have read this book"})})),Object(r.jsx)(y.a.Item,{label:"Series",name:"Series",rules:[{required:!1,message:"Input series if necessary"}],children:Object(r.jsx)(O.a,{})}),Object(r.jsx)(y.a.Item,{label:"Leant",name:"Leant",rules:[{required:!1,message:"Who have you leant this book to, if anyone"}],children:Object(r.jsx)(O.a,{})}),Object(r.jsx)(y.a.Item,Object(v.a)(Object(v.a)({},n),{},{children:Object(r.jsx)(N.a,{type:"primary",htmlType:"submit",children:"Submit"})}))]}))})]})}var C=n(326);function T(e){var t=e.book;return t?(console.log(t),Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:t.title}),Object(r.jsxs)("h2",{children:["By ",t.author]}),t.series?Object(r.jsxs)("h3",{children:["Part of the ",t.series," series."]}):"",Object(r.jsxs)("p",{children:[t.genre," | ",t.read?"Read":"Not read"," | Leant to:",t.leant?t.leant:" No one"]}),Object(r.jsxs)("p",{children:["Edit Book |",Object(r.jsx)(C.a,{title:"Are you sure to delete ".concat(t.title,"?"),onConfirm:function(){var e;e=t.id,fetch("https://patricks-bookshelf.herokuapp.com/delete/".concat(e),{method:"delete",body:JSON.stringify({}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){console.log(e)})).catch((function(e){return console.log(e,"my error")})),w.b.success("".concat(t.title," has been deleted")).then(window.location.href="/")},onCancel:function(){return e=t.title,void w.b.error("".concat(e," has not been deleted"));var e},okText:"Yes",cancelText:"No",children:Object(r.jsx)("button",{class:"red",children:"Delete Book"})})]})]})):Object(r.jsx)("p",{children:"..."})}var L=function(e){var t=e.user,n=Object(g.f)().pathname,c=Object(a.useState)(""),o=Object(u.a)(c,2),i=o[0],s=o[1],l=Object(a.useState)({}),j=Object(u.a)(l,2),h=j[0],p=j[1];function O(){return(O=Object(b.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://patricks-bookshelf.herokuapp.com/book/".concat(t));case 2:return n=e.sent,e.next=5,n.json();case 5:r=e.sent,p(r.payload);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){function e(){return(e=Object(b.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://patricks-bookshelf.herokuapp.com/");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,s(n.payload);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(a.useEffect)((function(){var e=n.split("/").pop();"number"===typeof(e=parseInt(e))&&function(e){O.apply(this,arguments)}(e)}),[n]),Object(r.jsxs)("div",{children:[Object(r.jsx)(f,{nickname:t.nickname,bookCount:i?i.length:"..."}),Object(r.jsx)("main",{children:Object(r.jsxs)(g.c,{children:[Object(r.jsx)(g.a,{exact:!0,path:"/",children:Object(r.jsx)(k,{visability:!!i,data:i,nickname:t.nickname})}),Object(r.jsx)(g.a,{path:"/add-book",children:Object(r.jsx)(S,{})}),Object(r.jsx)(g.a,{path:"/book/:id",children:Object(r.jsx)(T,{book:h?h[0]:""})})]})})]})};var P=function(){console.log("Hi");var e=Object(i.b)(),t=e.user,n=e.isAuthenticated;return e.isLoading?Object(r.jsx)("div",{children:"Loading..."}):(n||console.log("Logged out"),n?n&&Object(r.jsx)("div",{children:Object(r.jsx)(L,{user:t})}):Object(r.jsx)(s,{}))},A=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,327)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))};o.a.render(Object(r.jsx)(i.a,{domain:"dev-cqq8w3s0.eu.auth0.com",clientId:"xkpMY496PP4G0qc3qm3uRaPvazNMpbJ5",redirectUri:window.location.origin,children:Object(r.jsx)(p.a,{children:Object(r.jsx)(P,{})})}),document.getElementById("root")),A()}},[[319,1,2]]]);
//# sourceMappingURL=main.486ed2d2.chunk.js.map